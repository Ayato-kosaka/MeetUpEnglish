<%= form_with(model: home, local: true) do |form| %>
  <% if home.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(home.errors.count, "error") %> prohibited this home from being saved:</h2>

      <ul>
      <% home.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <% if params[:selected_city]   then @home.cityId = params[:selected_city] end %>

  <div class="field">
    <%= form.label :date %>
    <%= form.date_select :date %>
  </div>

  <div class="field">
    <%= form.label :start %>
    <%= form.time_select :start %>
  </div>

  <div class="field">
    <%= form.label :end %>
    <%= form.time_select :end %>
  </div>

  <div class="field">
    <%= form.label :peopleNum %>
    <%= form.number_field :peopleNum, value:3 %>
  </div>

  <div class="field">
    <%= form.label :teacherId %>
    <%= form.number_field :teacherId %>
  </div>

  <div class="field">
    <%= form.label :cafeId %>
    <% if params[:selected_city] %>
    <%= params[:selected_city]?(form.select :cafeId,Cafe.where(cityId: params[:selected_city]).map{|n|[n.name,n.id]}):(form.number_field :cafeId) %>
    <% else %>
    <%= form.select :cafeId,Cafe.where(cityId: @home.cityId).map{|n|[n.name,n.id]} %>
    <% end %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
